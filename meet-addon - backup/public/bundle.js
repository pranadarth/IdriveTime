!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.add_on=e():t.add_on=e()}(this,()=>(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{initializeMainStage:()=>h,setUpSidePanel:()=>l});const n="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};(function(){var t=Object.defineProperty,e=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(n,r){if(r)t:{var o=e;n=n.split(".");for(var i=0;i<n.length-1;i++){var a=n[i];if(!(a in o))break t;o=o[a]}(r=r(i=o[n=n[n.length-1]]))!=i&&null!=r&&t(o,n,{configurable:!0,writable:!0,value:r})}}("Symbol.dispose",function(t){return t||Symbol("Symbol.dispose")});var n,r,o=this||self;function i(t,e){function n(){}n.prototype=e.prototype,t.qa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.oa=function(t,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return e.prototype[n].apply(t,o)}}function a(t,e){if(Error.captureStackTrace)Error.captureStackTrace(this,a);else{const t=Error().stack;t&&(this.stack=t)}t&&(this.message=String(t)),void 0!==e&&(this.cause=e)}function s(t){o.setTimeout(()=>{throw t},0)}i(a,Error),a.prototype.name="CustomError";t:{for(var c=["CLOSURE_FLAGS"],l=o,u=0;u<c.length;u++)if(null==(l=l[c[u]])){r=null;break t}r=l}var d,f=r&&r[610401301];n=null!=f&&f;const g=o.navigator;function h(t){return!!n&&!!d&&d.brands.some(({brand:e})=>e&&-1!=e.indexOf(t))}function p(t){var e;return(e=o.navigator)&&(e=e.userAgent)||(e=""),-1!=e.indexOf(t)}function m(){return!!n&&!!d&&d.brands.length>0}function y(){return m()?h("Chromium"):(p("Chrome")||p("CriOS"))&&!(!m()&&p("Edge"))||p("Silk")}function w(t,e){(e=Array.prototype.indexOf.call(t,e,void 0))>=0&&Array.prototype.splice.call(t,e,1)}function v(t){let e="",n=0;const r=t.length-10240;for(;n<r;)e+=String.fromCharCode.apply(null,t.subarray(n,n+=10240));return e+=String.fromCharCode.apply(null,n?t.subarray(n):t),btoa(e)}d=g&&g.userAgentData||null,!p("Android")||y(),y(),p("Safari")&&(y()||!m()&&p("Coast")||!m()&&p("Opera")||!m()&&p("Edge")||(m()?h("Microsoft Edge"):p("Edg/"))||m()&&h("Opera"));const b=/[-_.]/g,S={"-":"+",_:"/",".":"="};function x(t){return S[t]||""}function A(t){return null!=t&&t instanceof Uint8Array}var E={};function I(){return P||(P=new T(null,E))}var T=class{constructor(t,e){if(j(e),this.g=t,null!=t&&0===t.length)throw Error("ByteString should be constructed with non-empty values")}};let P,N;function j(t){if(t!==E)throw Error("illegal external caller")}function k(t,e){t.__closure__error__context__984382||(t.__closure__error__context__984382={}),t.__closure__error__context__984382.severity=e}function _(){const t=Error();k(t,"incident"),s(t)}function U(t){return k(t=Error(t),"warning"),t}function M(){return"function"==typeof BigInt}function B(t){return Array.prototype.slice.call(t)}function C(t,e){return e&&Symbol.for&&t?Symbol.for(t):null!=t?Symbol(t):Symbol()}var O=C("jas",!0);C();var L=C(),D=C();function R(t,e){e[O]=-30975&t}function F(t,e){e[O]=-30941&t|34}C(),C();var z,$={},G={};function J(t){return!(!t||"object"!=typeof t||t.g!==G)}function W(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)&&t.constructor===Object}function H(t,e){if(null!=t)if("string"==typeof t)t=t?new T(t,E):I();else if(t.constructor!==T)if(A(t))t=t.length?new T(new Uint8Array(t),E):I();else{if(!e)throw Error();t=void 0}return t}function K(t){return!(!Array.isArray(t)||t.length||!(1&t[O]))}const Y=[];function q(t){if(2&t)throw Error()}Y[O]=55,z=Object.freeze(Y);var V=Object.freeze({});function X(t){return t.pa=!0,t}var Z=X(t=>"number"==typeof t),Q=X(t=>"string"==typeof t),tt=X(t=>"boolean"==typeof t),et="function"==typeof o.BigInt&&"bigint"==typeof o.BigInt(0),nt=X(t=>et?t>=ot&&t<=at:"-"===t[0]?st(t,rt):st(t,it));const rt=Number.MIN_SAFE_INTEGER.toString(),ot=et?BigInt(Number.MIN_SAFE_INTEGER):void 0,it=Number.MAX_SAFE_INTEGER.toString(),at=et?BigInt(Number.MAX_SAFE_INTEGER):void 0;function st(t,e){if(t.length>e.length)return!1;if(t.length<e.length||t===e)return!0;for(let n=0;n<t.length;n++){const r=t[n],o=e[n];if(r>o)return!1;if(r<o)return!0}}let ct=0,lt=0;function ut(t){const e=t>>>0;ct=e,lt=(t-e)/4294967296>>>0}function dt(t){if(t<0){ut(-t);const[e,n]=ht(ct,lt);ct=e>>>0,lt=n>>>0}else ut(t)}function ft(t,e){if(t>>>=0,(e>>>=0)<=2097151)var n=""+(4294967296*e+t);else M()?n=""+(BigInt(e)<<BigInt(32)|BigInt(t)):(t=(16777215&t)+6777216*(n=16777215&(t>>>24|e<<8))+6710656*(e=e>>16&65535),n+=8147497*e,e*=2,t>=1e7&&(n+=t/1e7>>>0,t%=1e7),n>=1e7&&(e+=n/1e7>>>0,n%=1e7),n=e+gt(n)+gt(t));return n}function gt(t){return t=String(t),"0000000".slice(t.length)+t}function ht(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}function pt(t){return null==t||"boolean"==typeof t?t:"number"==typeof t?!!t:void 0}const mt=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function yt(t){const e=typeof t;switch(e){case"bigint":return!0;case"number":return Number.isFinite(t)}return"string"===e&&mt.test(t)}function wt(t){if(null!=t){if(!Number.isFinite(t))throw U("enum");t|=0}return t}function vt(t){if(null!=t){if("string"==typeof t){if(!t)return;t=+t}"number"==typeof t&&Number.isFinite(t)}}function bt(t){if(null!=t)t:{if(!yt(t))throw U("int64");switch(typeof t){case"string":t=xt(t);break t;case"bigint":var e=t=BigInt.asIntN(64,t);if(Q(e)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(e))throw Error(String(e))}else if(Z(e)&&!Number.isSafeInteger(e))throw Error(String(e));t=et?BigInt(t):tt(t)?t?"1":"0":Q(t)?t.trim()||"0":String(t);break t;default:t=St(t)}}return t}function St(t){if(t=Math.trunc(t),!Number.isSafeInteger(t)){dt(t);var e=ct,n=lt;(t=2147483648&n)&&(n=~n>>>0,0==(e=1+~e>>>0)&&(n=n+1>>>0));const r=4294967296*n+(e>>>0);t="number"==typeof(e=Number.isSafeInteger(r)?r:ft(e,n))?t?-e:e:t?"-"+e:e}return t}function xt(t){var e=Math.trunc(Number(t));if(Number.isSafeInteger(e))return String(e);if(-1!==(e=t.indexOf("."))&&(t=t.substring(0,e)),!("-"===t[0]?t.length<20||20===t.length&&Number(t.substring(0,7))>-922337:t.length<19||19===t.length&&Number(t.substring(0,6))<922337)){if(t.length<16)dt(Number(t));else if(M())t=BigInt(t),ct=Number(t&BigInt(4294967295))>>>0,lt=Number(t>>BigInt(32)&BigInt(4294967295));else{e=+("-"===t[0]),lt=ct=0;const n=t.length;for(let r=e,o=(n-e)%6+e;o<=n;r=o,o+=6){const e=Number(t.slice(r,o));lt*=1e6,ct=1e6*ct+e,ct>=4294967296&&(lt+=Math.trunc(ct/4294967296),lt>>>=0,ct>>>=0)}if(e){const[t,e]=ht(ct,lt);ct=t,lt=e}}if(t=ct,2147483648&(e=lt))if(M())t=""+(BigInt(0|e)<<BigInt(32)|BigInt(t>>>0));else{const[n,r]=ht(t,e);t="-"+ft(n,r)}else t=ft(t,e)}return t}function At(t){if(null!=t&&"string"!=typeof t)throw Error();return t}function Et(t,e,n){if(null!=t&&"object"==typeof t&&t.H===$)return t;if(Array.isArray(t)){var r=0|t[O],o=r;return 0===o&&(o|=32&n),(o|=2&n)!==r&&(t[O]=o),new e(t)}}let It,Tt,Pt,Nt,jt,kt;function _t(t){let e;return null==(e=It)?void 0:e.get(t)}function Ut(t){try{return-1!==t.toString().indexOf("[native code]")?t:null}catch{return null}}function Mt(t,e){return Bt(e)}function Bt(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"bigint":return nt(t)?Number(t):String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if(K(t))return}else{if(A(t))return v(t);if(t instanceof T){const e=t.g;return null==e?"":"string"==typeof e?e:t.g=v(e)}}}return t}function Ct(t,e,n,r,o){if(null!=t){if(Array.isArray(t))t=K(t)?void 0:o&&2&t[O]?t:Ot(t,e,n,void 0!==r,o);else if(W(t)){const i={};for(let a in t)i[a]=Ct(t[a],e,n,r,o);t=i}else t=e(t,r);return t}}function Ot(t,e,n,r,o){const i=r||n?0|t[O]:0;r=r?!!(32&i):void 0,t=B(t);for(let i=0;i<t.length;i++)t[i]=Ct(t[i],e,n,r,o);return n&&n(i,t),t}function Lt(t){return t.H===$?t.toJSON():Bt(t)}function Dt(t,e,n=F){if(null!=t){if(t instanceof Uint8Array)return e?t:new Uint8Array(t);if(Array.isArray(t)){var r=0|t[O];return 2&r?t:(e&&(e=0===r||!!(32&r)&&!(64&r||!(16&r))),e?(t[O]=-12293&r|34,t):Ot(t,Dt,4&r?F:n,!0,!0))}return t.H===$&&(t=2&(r=(n=t.m)[O])?t:new t.constructor(Rt(n,r,!0))),t}}function Rt(t,e,n){const r=n||2&e?F:R,o=!!(32&e);return t=function(t,e,n){var r=(t=B(t)).length;const o=256&e?t[r-1]:void 0;for(r+=o?-1:0,e=512&e?1:0;e<r;e++)t[e]=n(t[e]);if(o){e=t[e]={};for(const t in o)e[t]=n(o[t])}return t}(t,e,t=>Dt(t,o,r)),t[O]=32|t[O]|(n?2:0),t}function Ft(t){const e=t.m,n=e[O];return 2&n?new t.constructor(Rt(e,n,!1)):t}function zt(t,e){return Gt(t=t.m,t[O],e)}function $t(t,e,n,r){if(!((e=r+(+!!(512&e)-1))<0||e>=t.length||e>=n))return t[e]}function Gt(t,e,n,r){if(-1===n)return null;const o=e>>15&1023||536870912;if(!(n>=o)){var i,a=t.length;return r&&256&e&&null!=(r=t[a-1][n])?($t(t,e,o,n)&&null!=L&&(t=null!=(i=N)?i:N={},(i=t[L]||0)>=4||(t[L]=i+1,_())),r):$t(t,e,o,n)}return 256&e?t[t.length-1][n]:void 0}function Jt(t,e,n){const r=t.m;let o=r[O];return q(o),Wt(r,o,e,n),t}function Wt(t,e,n,r){const o=e>>15&1023||536870912;if(n>=o){let i,a=e;if(256&e)i=t[t.length-1];else{if(null==r)return a;i=t[o+(+!!(512&e)-1)]={},a|=256}return i[n]=r,n<o&&(t[n+(+!!(512&e)-1)]=void 0),a!==e&&(t[O]=a),a}return t[n+(+!!(512&e)-1)]=r,256&e&&n in(t=t[t.length-1])&&delete t[n],e}function Ht(t,e,n,r){return void 0!==Zt(t,e,n=qt(t,r)===n?n:-1)}function Kt(t){return!!(2&t)&&!!(4&t)||!!(2048&t)}function Yt(t,e,n,r){const o=t.m;let i=o[O];return q(i),Wt(o,i,e,("0"===r?0===Number(n):n===r)?void 0:n),t}function qt(t,e){return Xt(Vt(t=t.m),t,t[O],e)}function Vt(t){let e;return null!=(e=t[D])?e:t[D]=new Map}function Xt(t,e,n,r){let o=t.get(r);if(null!=o)return o;o=0;for(let t=0;t<r.length;t++){const i=r[t];null!=Gt(e,n,i)&&(0!==o&&(n=Wt(e,n,o)),o=i)}return t.set(r,o),o}function Zt(t,e,n,r){let o=(t=t.m)[O];return(e=Et(r=Gt(t,o,n,r),e,o))!==r&&null!=e&&Wt(t,o,n,e),e}function Qt(t,e,n){if(null==(e=Zt(t,e,n,!1)))return e;let r=(t=t.m)[O];if(!(2&r)){const o=Ft(e);o!==e&&Wt(t,r,n,e=o)}return e}function te(t,e,n){return null==n&&(n=void 0),Jt(t,e,n)}function ee(t,e,n,r){null==r&&(r=void 0);t:{const a=t.m;var o=a[O];if(q(o),null==r){var i=Vt(a);if(Xt(i,a,o,n)!==e)break t;i.set(n,0)}else{const t=Vt(i=a),r=Xt(t,i,o,n);r!==e&&(r&&(o=Wt(i,o,r)),t.set(n,e))}Wt(a,o,e,r)}return t}function ne(t,e){const n=t.m;let r=n[O];if(q(r),null==e)return Wt(n,r,1),t;var o,i=e;e=(null==(o=Tt)?void 0:o.get(i))||i,o=i=0|e[O];const a=Kt(i),s=a||Object.isFrozen(e);let c=!0,l=!0;for(let t=0;t<e.length;t++){var u=e[t];a||(u=!!(2&u.m[O]),c&&(c=!u),l&&(l=u))}return a||(i=c?13:5,i=l?16|i:-17&i),s&&i===o||(e=B(e),o=0,i=oe(i=re(i,r),r,!0)),i!==o&&(e[O]=i),Wt(n,r,1,e),t}function re(t,e){return-2049&(2&e?2|t:-3&t)|32}function oe(t,e,n){return 32&e&&n||(t&=-33),t}function ie(t,e){return null!=t?t:e}function ae(t){return null!=(t=zt(t,1))&&("bigint"==typeof t?nt(t)?t=Number(t):(t=BigInt.asIntN(64,t),t=nt(t)?Number(t):String(t)):t=yt(t)?"number"==typeof t?St(t):xt(t):void 0),ie(t,0)}function se(t,e){return ie(null==(t=zt(t,e))||"string"==typeof t?t:void 0,"")}function ce(t,e){return ie(t=null==(t=zt(t,e))?t:Number.isFinite(t)?0|t:void 0,0)}function le(t,e,n,r){return Qt(t,e,n=qt(t,r)===n?n:-1)}function ue(t){try{return kt=!0,JSON.stringify(fe(t),Mt)}finally{kt=!1}}var de=class{constructor(t){t:{var e=null!=e?e:0;if(null==t){var n=96;t=[]}else{if(!Array.isArray(t))throw Error("narr");if(2048&(n=0|t[O]))throw Error("farr");if(64&n)break t;1===e||2===e||(n|=64);var r=(e=t).length;if(r&&W(e[--r])){if((e=r-(+!!(512&(n|=256))-1))>=1024)throw Error("pvtlmt");n=-33521665&n|(1023&e)<<15}}t[O]=n}this.m=t}toJSON(){return fe(this)}};function fe(t){t=t.m,t=kt?t:Ot(t,Lt,void 0,void 0,!1);{var e=!kt;let l=t.length;if(l){var n=t[l-1],r=W(n);r?l--:n=void 0;var o=t;if(r){t:{var i,a=n,s=!1;if(a)for(let t in a)if(isNaN(+t)){let e;(null!=(e=i)?e:i={})[t]=a[t]}else if(r=a[t],Array.isArray(r)&&(K(r)||J(r)&&0===r.size)&&(r=null),null==r&&(s=!0),null!=r){let e;(null!=(e=i)?e:i={})[t]=r}if(s||(i=a),i)for(let t in i){s=i;break t}s=null}a=null==s?null!=n:s!==n}for(;l>0&&(null==(i=o[l-1])||K(i)||J(i)&&0===i.size);l--)var c=!0;(o!==t||a||c)&&(e?(c||a||s)&&(o.length=l):o=Array.prototype.slice.call(o,0,l),s&&o.push(s)),c=o}else c=t}return c}function ge(t){return e=>{if(null==e||""==e)e=new t;else{if(e=JSON.parse(e),!Array.isArray(e))throw Error("dnarr");e[O]|=32,e=new t(e)}return e}}de.prototype.H=$,de.prototype.toString=function(){try{return kt=!0,fe(this).toString()}finally{kt=!1}};var he,pe=(he=class extends de{},t=>{if(t=JSON.parse(t),!Array.isArray(t)){var e=typeof t;throw Error("Expected jspb data to be an array, got "+("object"!=e?e:t?Array.isArray(t)?"array":e:"null")+": "+t)}return t[O]|=34,new he(t)}),me=class extends de{};function ye(t){return we(t,t.index)>=t.g&&(t.h[t.index]=Date.now(),t.index=(t.index+1)%1,!0)}function we(t,e){let n;return Date.now()-(null!=(n=t.h[e])?n:-1*t.g)}var ve=class{constructor(t){this.g=t,this.h=[],this.index=0}},be=class extends de{},Se=[2,3],xe=class extends de{},Ae=class extends Error{constructor({errorType:t,message:e,i:n}){super(`Meet Add-on SDK error: ${e}${n?` - ${n}`:""}`),this.errorType=t}},Ee={errorType:"InternalError",message:"An unexpected error has occurred.",i:"No further information is available."},Ie={errorType:"MissingUrlParameter",message:"Missing required Meet SDK URL parameter",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not strip URL parameters (e.g. as part of a redirect)."},Te={errorType:"NeedsMainStageContext",message:"This method can only be invoked if the addon is running in the main stage.",i:"Use getFrameType to check whether the addon is running in the main stage before invoking this method."},Pe={errorType:"NeedsSidePanelContext",message:"This method can only be invoked if the addon is running in the side panel.",i:"Use getFrameType to check whether the addon is running in the side panel before invoking this method."},Ne={errorType:"NotSupportedInStandalone",message:"This method is not supported in standalone mode.",i:"Do not call this method in standalone mode."},je={errorType:"InternalError",message:"The frame type URL parameter is set to an unexpected value.",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect)."},ke={errorType:"InvalidCloudProjectNumber",message:"Cloud Project Number provided by meet does not match the one passed in by the SDK. Ensure that the correct Cloud Project Number is passed to the SDK as a string.",i:"This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect) and ensure that the correct Cloud Project Number was passed into the SDK as a string."},_e={errorType:"DestinationNotReady",message:"The recipient frame is not connected via the addon SDK and cannot receive the notification.",i:"Make sure the destination frame has connected before sending messages to it."},Ue={errorType:"InvalidActivityStartingState",message:"Origin of the ActivityStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.",i:"Ensure that the ActivityStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest."},Me={errorType:"ActivityStartingStateMissingAttributes",message:"The supplied ActivityStartingState object does not contain any recognized attributes.",i:"Ensure that the ActivityStartingState object contains at least one of the following attributes: mainStageUrl, sidePanelUrl, additionalData."},Be={errorType:"ActivityStartingStateUnrecognizedAttributes",message:"The supplied ActivityStartingState object contains attributes that are not recognized.",i:"Ensure that the ActivityStartingState object has only the following attributes: mainStageUrl, sidePanelUrl, additionalData."},Ce={errorType:"AddonStartingStateMissingAttributes",message:"The supplied AddonStartingState object does not contain any recognized attributes.",i:"Ensure that the AddonStartingState object contains at least one of the following attributes: sidePanelUrl, additionalData."},Oe={errorType:"AddonStartingStateUnrecognizedAttributes",message:"The supplied AddonStartingState object contains attributes that are not recognized.",i:"Ensure that the AddonStartingState object has only the following attributes: sidePanelUrl, additionalData."},Le=t=>({errorType:"ArgumentNullError",message:`The argument supplied for '${t}' was 'null' but a value was expected.`,i:"Ensure you are passing a value of the expected type for the argument."}),De=(t,e,n)=>({errorType:"ArgumentTypeError",message:`The type '${e}' of argument supplied for '${t}' did not match the expected type '${n}'.`,i:"Ensure the type of the argument provided matches the expected type."}),Re={errorType:"ActivityIsOngoing",message:"Operation cannot be performed while an activity is ongoing.",i:"Ensure that no activity is ongoing."},Fe={errorType:"InternalError",message:"Frame message missing required Meet SDK command.",i:"Send one of the available commands in the frame message."},ze={errorType:"NoActivityFound",message:"No activity found.",i:"Ensure that the activity is started before performing this operation."},$e={errorType:"RequiresEapEnrollment",message:"This feature is only available to early access partners.",i:"Meet add-on early access enrollment is currently closed."},Ge={errorType:"UserNotInitiator",message:"Operation cannot be performed because the user is not the initiator of the current activity.",i:"Ensure that the user is the initiator of the current activity or that the activity has ended."},Je={errorType:"SizeLimitExceededActivityStartingState",message:"The size of the activityStartingState URLs and/or its data exceed the limits allowed.",i:"Ensure that the activityStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters."},We={errorType:"SizeLimitExceededFrameToFrameMessage",message:"The size of the frame to frame message exceeds the limits allowed.",i:"Ensure that the frame to frame message size is less than 1,000,000 characters."},He={errorType:"AddonSessionAlreadyCreated",message:"The addon session has already been created.",i:"Only instantiate the AddonSession once."},Ke={errorType:"UserCancelled",message:"The user cancelled starting an activity.",i:"The user needs to click continue to start the activity."},Ye={errorType:"NotSupportedInMeetCall",message:"This method is not supported during a Meet call.",i:"Do not call this method during a Meet call."},qe={errorType:"InvalidAddonStartingState",message:"Origin of the AddonStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.",i:"Ensure that the AddonStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest."},Ve={errorType:"SizeLimitExceededAddonStartingState",message:"The size of the AddonStartingState URLs and/or its data exceed the limits allowed.",i:"Ensure that the AddonStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters."},Xe={errorType:"MeetingPolicyPreventsStartingActivity",message:"A meeting policy (such as using host control settings) prevents the user from starting the activity.",i:"Have a meeting host or administrator modify the necessary settings to allow the current user to start the activity."};function Ze({errorType:t,message:e,i:n},r=""){throw new Ae({errorType:t,message:r?`${e} ${r}`:e,i:n})}function Qe(t,e){Ze({...Ie,message:`${Ie.message}: ${t}. In URL ${e}`})}function tn(t){return Yt(new rn,1,wt(t),0)}function en(t,e){return Yt(t,2,At(e),"")}function nn(t,e){return Yt(t,3,At(e),"")}var rn=class extends de{getFrameType(){return ce(this,1)}};function on(t){var e;e=void 0===V?2:4;var n=t.m[O],r=n,o=!(2&n),i=rn;e=(n=!!(2&r))?1:e,o&&(o=!n),n=Gt(t=t.m,r,1);var a=0|(n=Array.isArray(n)?n:z)[O],s=!!(4&a);if(!s){var c=a;0===c&&(c=re(c,r)),a=n;var l=r;const t=!!(2&(c|=1));t&&(l|=2);let e=!t,o=!0,s=0,u=0;for(;s<a.length;s++){const n=Et(a[s],i,l);if(n instanceof i){if(!t){const t=!!(2&n.m[O]);e&&(e=!t),o&&(o=t)}a[u++]=n}}u<s&&(a.length=u),c|=4,c=o?16|c:-17&c,c=e?8|c:-9&c,a[O]=c,t&&Object.freeze(a),a=c}if(o&&!(8&a||!n.length&&(1===e||4===e&&32&a))){for(Kt(a)&&(n=B(n),a=re(a,r),r=Wt(t,r,1,n)),o=n,i=a,a=0;a<o.length;a++)(c=o[a])!==(l=Ft(c))&&(o[a]=l);i|=8,i=o.length?-17&i:16|i,a=o[O]=i}let u;if(1===e||4===e&&32&a){if(!Kt(a)){r=a;var d=!!(32&a);(a|=!n.length||16&a&&(!s||d)?2:2048)!==r&&(n[O]=a),Object.freeze(n)}}else s=5===e&&(!!(32&a)||Kt(a)||!!_t(n)),(2===e||s)&&Kt(a)&&(n=B(n),a=oe(a=re(a,r),r,!1),n[O]=a,r=Wt(t,r,1,n)),Kt(a)||(t=a,(a=oe(a,r,!1))!==t&&(n[O]=a)),s?u=function(t){var e;return void 0===Pt&&(Pt="function"==typeof Proxy?Ut(Proxy):null),(e=!Pt)||(void 0===Nt&&(Nt="function"==typeof WeakMap?Ut(WeakMap):null),e=!Nt),e?t:(e=_t(t))?e:Math.random()>.01?t:(function(t){if(void 0===jt){const t=new Pt([],{});jt=1===Array.prototype.concat.call([],t).length}jt&&"function"==typeof Symbol&&Symbol.isConcatSpreadable&&(t[Symbol.isConcatSpreadable]=!0)}(t),function(t,e){(It||(It=new Nt)).set(t,e),(Tt||(Tt=new Nt)).set(e,t)}(t,e=new Pt(t,{set:(t,e,n)=>(_(),t[e]=n,!0)})),e)}(n):2===e&&(null==(d=It)||d.delete(n));return u||n}function an(t){return ne(new sn,t)}var sn=class extends de{},cn=class extends de{};function ln(t){return Yt(new un,1,wt(t),0)}var un=class extends de{},dn=class extends de{},fn=class extends de{},gn=class extends de{},hn=class extends de{getMeetingInfo(){return le(this,gn,3,pn)}getMeetPlatformInfo(){return le(this,fn,4,pn)}},pn=[2,3,4,5],mn=class extends de{},yn=[1,4,5,6,7,8,9,10,11,12,13,14,15,16,17],wn=class extends de{},vn=class extends de{},bn=new Map([[2,"MAIN_STAGE"],[1,"SIDE_PANEL"]]),Sn=new Map([[0,"UNKNOWN"],[1,"OPEN_ADDON"],[2,"START_ACTIVITY"],[3,"JOIN_ACTIVITY"]]);function xn(t){t&&"function"==typeof t.dispose&&t.dispose()}function An(){this.s=this.s,this.g=this.g}function En(t,e){t.s?e():(t.g||(t.g=[]),t.g.push(e))}function In({J:t,R:e}){if(null===t)throw new Ae(Le("activityStartingState"));if(e||void 0!==t){if("object"!=typeof t)throw new Ae(De("activityStartingState",typeof t,"object"+(e?"":" | undefined")));if(void 0!==t.mainStageUrl&&"string"!=typeof t.mainStageUrl)throw new Ae(De("mainStageUrl",typeof t.mainStageUrl,"string | undefined"));if(void 0!==t.sidePanelUrl&&"string"!=typeof t.sidePanelUrl)throw new Ae(De("sidePanelUrl",typeof t.sidePanelUrl,"string | undefined"));if(void 0!==t.additionalData&&"string"!=typeof t.additionalData)throw new Ae(De("additionalData",typeof t.additionalData,"string | undefined"));if(Object.keys(t).length!==+!!t.mainStageUrl+ +!!t.sidePanelUrl+ +!!t.additionalData)throw new Ae(Be);if(0===Object.keys(t).length)throw new Ae(Me)}}function Tn(t){const e=[];return e.push(nn(en(tn(2),t.mainStageUrl),t.additionalData)),e.push(nn(en(tn(1),t.sidePanelUrl),t.additionalData)),e}An.prototype.s=!1,An.prototype.dispose=function(){this.s||(this.s=!0,this.G())},An.prototype[Symbol.dispose]=function(){this.dispose()},An.prototype.G=function(){if(this.g)for(;this.g.length;)this.g.shift()()};var Pn=class extends An{constructor(t){super(),this.context=t,this.h={},_r(this.context.g.U,t=>{if(7===qt(t.content,yn)){const n=this.h.frameToFrameMessage;if(t=le(t.content,dn,7,yn),n&&t){var e=ce(t,1);if(void 0===(e=bn.get(e)))throw Error("Unknown frame type.");n({originator:e,payload:se(t,2)})}}})}async getMeetingInfo(){const t=await qr(this.context.g,ln(2));return{meetingId:se(t.getMeetingInfo(),1),meetingCode:se(t.getMeetingInfo(),2)}}async getFrameOpenReason(){let t;const e=null!=(t=this.context.h.ca)?t:0;let n;return null!=(n=Sn.get(e))?n:"UNKNOWN"}async getActivityStartingState(){var t=le(await qr(this.context.g,ln(1)),sn,2,pn);const e=null==t?void 0:on(t).find(t=>2===t.getFrameType());return t=null==t?void 0:on(t).find(t=>1===t.getFrameType()),{mainStageUrl:(null==e?void 0:se(e,2))||void 0,sidePanelUrl:(null==t?void 0:se(t,2))||void 0,additionalData:(null==t?void 0:se(t,3))||void 0}}async setActivityStartingState(t){In({J:t,R:!0});var e=Tn(t);t=Vr;var n=this.context.g,r=new wn;r=te(r,1,e=an(e)),await t(n,r)}on(t,e){this.h[t]=e}async getMeetPlatformInfo(){return{isMeetHardware:ie(pt(zt((await qr(this.context.g,ln(3))).getMeetPlatformInfo(),1)),!1)}}async closeAddon(){await async function(t){var e=Zr,n=new zn,r=new kn;n=ee(n,11,$n,r),await e(t,Dr(n))}(this.context.g)}async startActivity(t){In({J:t,R:!1});const e=new vn;t&&te(e,1,t=an(t=Tn(t))),await async function(t,e){var n=Zr;e=ee(new zn,14,$n,e),await n(t,Dr(e))}(this.context.g,e)}async endActivity(t){var e=Xr,n=this.context.g;t=Yt(new cn,1,wt("aab61ee0-51b4-475d-aa4d-849f2498640d"===t?999:0),0),await e(n,t)}},Nn=ge(class extends de{getFrameOpenReason(){return ce(this,5)}});function jn(){var t=window.location.href,e=window.location.href,n=new URL(e).searchParams.get("meet_sdk");if(n?e=Nn(atob(n)):(Qe("meet_sdk",e),e=void 0),(n=se(e,1))||Qe("meet_addon_frame_type",t),2!==(n=Number(n))&&1!==n)throw new Ae(je);const r=se(e,2);r||Qe("meet_control_channel_name",t);const o=se(e,4);var i;return o||Qe("addon_cloud_project_number",t),{ca:t=null!=(i=e.getFrameOpenReason())?i:0,frameType:n,ba:r,cloudProjectNumber:o,S:i=se(e,3)||"https://meet.google.com"}}var kn=class extends de{},_n=class extends de{},Un=class extends de{},Mn=[1,2],Bn=class extends de{},Cn=class extends de{},On=class extends de{},Ln=class extends de{},Dn=class extends de{},Rn=class extends de{setAddonStartingState(t){return te(this,1,t)}},Fn=class extends de{},zn=class extends de{},$n=[1,2,5,6,7,8,9,10,11,13,14,15,16],Gn=class extends de{},Jn=ge(Gn),Wn=[1,2];class Hn{constructor(t,e){this.data=t,this.channel=e}}var Kn=Promise;function Yn(t){const e=new MessageChannel;return Xn(e.port1,t),e}function qn(t,e){return Xn(t,e),new Vn(t)}class Vn{constructor(t){this.g=t}send(t,e,n=[]){e=Yn(e),this.g.postMessage(t,[e.port2].concat(n))}C(t,e){return new Kn(n=>{this.send(t,n,e)})}}function Xn(t,e){e&&(t.onmessage=t=>{var n=t.data;t=qn(t.ports[0]),e(new Hn(n,t))})}var Zn="undefined"!=typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?t=>t&&AsyncContext.Snapshot.wrap(t):t=>t;function Qn(t,e){t.l(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}class tr{constructor(t,e){this.j=t,this.l=e,this.h=0,this.g=null}get(){let t;return this.h>0?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.j(),t}}function er(){var t=ar;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var nr=new tr(()=>new rr,t=>t.reset());class rr{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let or,ir=!1,ar=new class{constructor(){this.h=this.g=null}add(t,e){const n=nr.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},sr=(t,e)=>{or||cr(),ir||(or(),ir=!0),ar.add(t,e)},cr=()=>{const t=Promise.resolve(void 0);or=()=>{t.then(lr)}};function lr(){let t;for(;t=er();){try{t.h.call(t.g)}catch(t){s(t)}Qn(nr,t)}ir=!1}function ur(){}function dr(t){if(this.g=0,this.T=void 0,this.l=this.h=this.j=null,this.v=this.B=!1,t!=ur)try{const e=this;t.call(void 0,function(t){wr(e,2,t)},function(t){wr(e,3,t)})}catch(t){wr(this,3,t)}}function fr(){this.next=this.context=this.h=this.l=this.g=null,this.j=!1}fr.prototype.reset=function(){this.context=this.h=this.l=this.g=null,this.j=!1};var gr=new tr(function(){return new fr},function(t){t.reset()});function hr(t,e,n){const r=gr.get();return r.l=t,r.h=e,r.context=n,r}function pr(t,e){(e=hr(e=Zn(e),e)).j=!0,yr(t,e)}function mr(t,e){if(0==t.g)if(t.j){var n=t.j;if(n.h){var r=0,o=null,i=null;for(let e=n.h;e&&(e.j||(r++,e.g==t&&(o=e),!(o&&r>1)));e=e.next)o||(i=e);o&&(0==n.g&&1==r?mr(n,e):(i?((r=i).next==n.l&&(n.l=r),r.next=r.next.next):br(n),Sr(n,o,3,e)))}t.j=null}else wr(t,3,e)}function yr(t,e){t.h||2!=t.g&&3!=t.g||vr(t),t.l?t.l.next=e:t.h=e,t.l=e}function wr(t,e,n){if(0==t.g){t===n&&(e=3,n=new TypeError("Promise cannot resolve to itself")),t.g=1;t:{var r=n,o=t.ma,i=t.na;if(r instanceof dr){yr(r,hr(o||ur,i||null,t));var a=!0}else{if(r)try{var s=!!r.$goog_Thenable}catch(t){s=!1}else s=!1;if(s)r.then(o,i,t),a=!0;else{if("object"==(s=typeof r)&&null!=r||"function"==s)try{const e=r.then;if("function"==typeof e){!function(t,e,n,r,o){function i(t){a||(a=!0,r.call(o,t))}let a=!1;try{e.call(t,function(t){a||(a=!0,n.call(o,t))},i)}catch(t){i(t)}}(r,e,o,i,t),a=!0;break t}}catch(e){i.call(t,e),a=!0;break t}a=!1}}}a||(t.T=n,t.g=e,t.j=null,vr(t),3!=e||n instanceof Er||function(t,e){t.v=!0,sr(function(){t.v&&Ar.call(null,e)})}(t,n))}}function vr(t){t.B||(t.B=!0,sr(t.la,t))}function br(t){let e=null;return t.h&&(e=t.h,t.h=e.next,e.next=null),t.h||(t.l=null),e}function Sr(t,e,n,r){if(3==n&&e.h&&!e.j)for(;t&&t.v;t=t.j)t.v=!1;if(e.g)e.g.j=null,xr(e,n,r);else try{e.j?e.l.call(e.context):xr(e,n,r)}catch(t){Ar.call(null,t)}Qn(gr,e)}function xr(t,e,n){2==e?t.l.call(t.context,n):t.h&&t.h.call(t.context,n)}dr.prototype.then=function(t,e,n){return function(t,e,n,r){const o=hr(null,null,null);return o.g=new dr(function(t,i){o.l=e?function(n){try{const o=e.call(r,n);t(o)}catch(t){i(t)}}:t,o.h=n?function(e){try{const o=n.call(r,e);void 0===o&&e instanceof Er?i(e):t(o)}catch(t){i(t)}}:i}),o.g.j=t,yr(t,o),o.g}(this,Zn("function"==typeof t?t:null),Zn("function"==typeof e?e:null),n)},dr.prototype.$goog_Thenable=!0,dr.prototype.cancel=function(t){if(0==this.g){const e=new Er(t);sr(function(){mr(this,e)},this)}},dr.prototype.ma=function(t){this.g=0,wr(this,2,t)},dr.prototype.na=function(t){this.g=0,wr(this,3,t)},dr.prototype.la=function(){let t;for(;t=br(this);)Sr(this,t,this.g,this.T);this.B=!1};var Ar=s;function Er(t){a.call(this,t)}function Ir(t,e,n){this.promise=t,this.resolve=e,this.reject=n}i(Er,a),Er.prototype.name="cancel";let Tr=1,Pr=new WeakMap;function Nr(t,e,n){var r=kr;t.h.has(e),r(e,n)}var jr=class extends An{constructor(){super(),this.h=new Set}signal(){const t=new Ur;return this.h.add(t),En(this,function(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}(xn,t)),t}};function kr(t,e){return new Promise(n=>{Cr(()=>{t.L&&(t.ea=e,t.P=!0);for(const{I:n,slot:r}of t.o.values())try{r(e,{signal:t,I:n})}catch(t){s(t)}for(const n of t.A)n.resolve(e);t.A.clear(),n()})})}function _r(t,e,n){const r=Tr++;return Cr(()=>{!function(t,e,n,r){if(!t.s)if(r){if(!r.s){const o=()=>{Cr(()=>{t.o.delete(e);const n=Pr.get(r);n&&w(n,o)})};t.o.set(e,{I:e,slot:n,F:o}),Lr(r,o)}}else t.o.set(e,{I:e,slot:n,F:()=>t.o.delete(e)})}(t,r,e,n)}),r}var Ur=class extends An{constructor(){super(),this.L=!1,this.o=new Map,this.A=new Set,this.P=!1}detach(t){Cr(()=>{const e=this.o.get(t);e&&e.F()})}value(t){return this.promise(!0,t)}next(t){return this.promise(!1,t)}promise(t,e){const n=function(){let t,e;return new Ir(new dr(function(n,r){t=n,e=r}),t,e)}();return Cr(()=>{if(this.s)n.reject(new Er("Signal initially disposed"));else if(e&&e.s)n.reject(new Er("Owner initially disposed"));else if(t&&this.L&&this.P)n.resolve(this.ea);else if(this.A.add(n),pr(n.promise,()=>{this.A.delete(n)}),e){const t=()=>{n.reject(new Er("Owner asynchronously disposed"))};pr(n.promise,()=>{const n=Pr.get(e);n&&w(n,t)}),Lr(e,t)}}),n.promise}G(){super.G(),Cr(()=>{for(const{F:t}of this.o.values())t();this.o.clear();for(const t of this.A)t.reject(new Er("Signal asynchronously disposed"));this.A.clear()})}};const Mr=[];let Br=!1;function Cr(t){Mr.push(t),async function(){if(!Br)try{Br=!0;let t=Or(0);for(;t<Mr.length;)await Promise.resolve(),t=Or(t)}catch(t){s(t)}finally{Mr.length=0,Br=!1}}()}function Or(t){const e=t+100;for(;t<e&&t<Mr.length;)try{Mr[t++]()}catch(t){s(t)}return t}function Lr(t,e){if(t.s)e();else{var n=Pr.get(t);if(n)n.push(e);else{const n=[e];Pr.set(t,n),En(t,()=>{for(const t of[...n])t();Pr.delete(t)})}}}function Dr(t){return{content:ue(t=ee(new Gn,1,Wn,t))}}const Rr=new jr;function Fr(t,e){const n=Rr.signal();return{channel:qn(t,t=>{const r=e(t.data);Nr(Rr,n,{content:r,ka:t})}),signal:n}}let zr;var $r=class extends de{},Gr=class extends de{},Jr=class extends de{h(){return le(this,$r,2,Wr)}g(){return Ht(this,$r,2,Wr)}j(){return le(this,Gr,3,Wr)}l(){return Ht(this,Gr,3,Wr)}},Wr=[2,3],Hr=ge(class extends de{}),Kr=ge(class extends de{}),Yr=[1,2];async function qr(t,e){var n=Zr;let r;return e=ee(new zn,9,$n,e),t=await n(t,Dr(e)),null==(r=le(Jn(t.data.content),mn,2,Wn))?void 0:le(r,hn,9,yn)}async function Vr(t,e){var n=Zr;e=ee(new zn,8,$n,e),await n(t,Dr(e))}async function Xr(t,e){var n=Zr;e=ee(new zn,15,$n,e),await n(t,Dr(e))}async function Zr(t,e){let n;(t=await t.channel.C(e))||Ze(Ee,`Falsy response received from the message channel. ${JSON.stringify(t)}`),(e=t.data)||Ze(Ee,`Data field in the response from the message channel is falsy. ${JSON.stringify(e)}`),(e=e.content)||Ze(Ee,`Content field in the response from the message channel is falsy. ${JSON.stringify(e)}`);try{n=Jn(e)}catch(t){Ze(Ee,`The ControlMessage can't be deserialized. ${JSON.stringify(e)}. ${JSON.stringify(t)}`)}if((e=le(n,mn,2,Wn))||Ze(Ee,`MeetToAddonMessage field on ControlMessage is falsy. ${JSON.stringify(e)}`),void 0!==(null==(e=null==e?void 0:le(e,xe,10,yn))?void 0:ce(e,1)))throw new Ae(function(t){switch(t){case 0:default:return Ee;case 1:return _e;case 2:return Ue;case 3:return Re;case 4:return Fe;case 5:return $e;case 6:return Ne;case 7:return Ge;case 8:return Je;case 9:return We;case 10:return Ke;case 11:return Ye;case 12:return qe;case 13:return Ve;case 14:return ze;case 15:return Xe}}(ce(e,1)));return t}async function Qr(t){const e=function(){var t=new Un,e=new _n;return ee(t,1,Mn,e)}(),{channel:n,response:r}=await async function(t,e){var n,r=Zr;return e=ee(new zn,1,$n,e),t=(r=await r(t,Dr(e))).data.messagePort,n=null!=(r=null==(n=le(Jn(r.data.content),mn,2,Wn))?void 0:le(n,be,1,yn))?r:Yt(n=new be,1,wt(0),0),{channel:t?Fr(t,t=>Kr(t)):void 0,response:n}}(t,e);if(!n)throw new Ae(function(t){let e;var n=null!=(e=ce(t,1))?e:0;switch(t=function(t){switch(t){case 2:return"co";case 3:return"gd";default:return"unknown"}}(qt(t,Se)),n){case 1:return{errorType:"InternalError",message:`Could not connect to ${t} channel. Meet did not respond with a MessagePort.`,i:"No further information is available."};case 2:return{errorType:"InternalError",message:`Could not connect to ${t}. A conflicting ${t} exists.`,i:"No further information is available."};case 3:return{errorType:"InternalError",message:`Could not connect to ${t} channel. The addon does not have permission to open a ${t}.`,i:"This method might require EAP enrollment."};case 4:return{errorType:"InternalError",message:`Could not connect to ${t} channel. The addon is not authorized for this ${t}.`,i:"No further information is available."};case 0:default:return(t=>({errorType:"InternalError",message:`Could not connect to ${t} channel. Unknown error`,i:"No further information is available."}))(t);case 5:return"co"===t?{errorType:"InternalError",message:`Could not connect to ${t} channel. The coActivity was not found.`,i:`Consider starting the ${t} only after after the startActivity promise returns.`}:{errorType:"InternalError",message:`Could not connect to ${t} channel.`,i:"No further information is available."}}}(r));return n}async function to(t,e,n){var r=Zr,o=new zn;e=Yt(new On,1,wt(e),0),n=Yt(e,2,At(n),""),o=ee(o,7,$n,n),await r(t,Dr(o))}class eo extends An{constructor(t,e,n){super(),this.U=t,this.channel=e,this.h=function(t){var e=new ve(100),n=Promise.resolve();return(...r)=>ye(e)?t(...r):n}(async()=>{var t=this.channel,e=t.C,n=new zn,r=new Ln;n=ee(n,13,$n,r),await e.call(t,Dr(n))}),t=function(){var t=zr||(zr=pe("[1,2,0]"));const e=(t=Jt(t=Ft(t),4,At("dev-706864954"))).m,n=e[O];return 2&n?t:new t.constructor(Rt(e,n,!0))}(),se(t,4),vt(zt(t,1)),vt(zt(t,2)),vt(zt(t,3)),n=function(t,e){return ee(t,2,$n,e)}(new zn,function(t,e){return Yt(t,3,At(e),"")}(function(t){return te(new Bn,2,t)}(t),n)),this.channel.send(Dr(n)),_r(this.U,async t=>{16===qt(t.content,yn)&&await async function(t){await t.h()}(this)})}}let no;var ro=class{constructor(t){var e=no;this.h=t,this.g=e}delete(){throw Error("Not implemented.")}},oo=class extends de{h(){return le(this,$r,2,io)}g(){return Ht(this,$r,2,io)}j(){return le(this,Gr,3,io)}l(){return Ht(this,Gr,3,io)}},io=[2,3],ao=class extends de{},so=class extends de{},co=class extends de{},lo=class extends de{h(){return le(this,$r,2,uo)}g(){return Ht(this,$r,2,uo)}j(){return le(this,Gr,3,uo)}l(){return Ht(this,Gr,3,uo)}},uo=[2,3],fo=[5,6],go=class extends de{},ho=class extends de{},po=[1,2,3],mo=class extends Error{constructor(){super("Failed to create CoActivity: Connection refused - Meet refused to begin Live Sharing")}},yo=class{constructor(t){this.config=t}start(){return null!=this.g||(this.g=setInterval(()=>{this.config.ha()},this.config.da)),this}shutdown(){clearInterval(this.g)}};function wo(){const t=new Map,e={set:(n,r)=>(t.set(n,r),e),D:()=>t};return e}function vo(t){if(t.g()){var e=(t=t.h().m)[O],n=Gt(t,e,1),r=H(n,!0);if(null!=r&&r!==n&&Wt(t,e,1,r),e=null==(t=r)?I():t,t=Uint8Array,j(E),null!=(n=e.g)&&!A(n))if("string"==typeof n){b.test(n)&&(n=n.replace(b,x)),n=atob(n),r=new Uint8Array(n.length);for(let t=0;t<n.length;t++)r[t]=n.charCodeAt(t);n=r}else n=null;return{bytes:new t((e=null==n?n:e.g=n)||0)}}}function bo(t,e){return e=xo(e),ee(t,2,uo,e),t}function So(t,e){return e=xo(e),ee(t,2,io,e),t}function xo(t){return Yt(new $r,1,H(t.bytes,!1),I())}function Ao(t){if(t.l()){var e,n,r=se(t=t.j(),1),o=null!=(n=null==(e=Qt(t,me,2))?void 0:ae(e))?n:0;let i=(n=t.m)[O];const a=Gt(n,i,4);return null!=(e=null==a||"number"==typeof a?a:"NaN"===a||"Infinity"===a||"-Infinity"===a?Number(a):void 0)&&e!==a&&Wt(n,i,4,e),{mediaId:r,mediaPlayoutPosition:o,mediaPlayoutRate:ie(e,0),playbackState:To.get(ce(t,3))}}}function Eo(t,e){return e=No(e),ee(t,3,uo,e),t}function Io(t,e){return e=No(e),ee(t,3,io,e),t}const To=wo().set(0,"INVALID").set(1,"BUFFERING").set(2,"PLAY").set(3,"PAUSE").set(4,"ENDED").D(),Po=wo().set("INVALID",0).set("BUFFERING",1).set("PLAY",2).set("PAUSE",3).set("ENDED",4).D();function No(t){var e=new Gr;e=Yt(e,1,At(t.mediaId),"");var n=t.mediaPlayoutRate;if(null!=n&&"number"!=typeof n)throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);return e=Yt(e,4,n,0),n=Yt(n=new me,1,bt(t.mediaPlayoutPosition),"0"),Yt(e=te(e,2,n),3,wt(t=Po.get(t.playbackState)),0)}function jo(t,e){return e=Yt(new so,1,wt(e.u),0),ee(t,6,fo,e),t}function ko(t){var e=new ao;return ee(t,5,fo,e),t}const _o=wo().set("co-doing",1).set("co-watching",2).D();async function Uo(t,e,n){var r=e.C,o=new ho,i=new go;let a;if(i=Yt(i,1,At(t.activityTitle),""),i=Yt(i,2,wt(_o.get(t.K)),0),o=ee(o,3,po,i),null!=(a=ie(pt(zt(r=await r.call(e,o,Hr),1)),!1))&&a)return new Co(t,e,n,Qt(r,Jr,2));throw new mo}function Mo(t,e){const n=t.config.N(e);n&&!t.config.M(t.g,n)&&(t.g=n,t.j=ae(e),t.v(t.g))}function Bo(t,e){const{state:n,fa:r,context:o}=e(t.g);t.g=n,t.notify(t.g,o,r)}class Co{constructor(t,e,n,r){this.l=t,this.h=e,this.config=n,this.v=function(t){var e=new ve(500);let n,r=0;return(...o)=>{ye(e)?t(...o):(n=()=>{t(...o)},r||(r=setTimeout(()=>{let t;r=0,null==(t=n)||t()},function(t){const e=t.g;return(t=we(t,t.index))>=e?0:e-t}(e))))}}(t=>{this.l.O(t)}),function(t,e){const n=_r(t.signal,t=>{e(t)});t.o.push(n)}(this.h,t=>{const e=qt(t,Yr);switch(e){case 1:Mo(this,le(t,Jr,1,Yr));break;case 2:case 0:console.warn(`IllegalMessage: ${e} - Unhandled message - Please raise a bug with the MeetJS team`)}}),this.B=new yo({da:1e3,ha:()=>{var t,e,n=null==(e=(t=this.l).ja)?void 0:e.call(t);if(null!==this.g){this.g={...this.g,...n},t=new ho,n=(e=this.config).W;var r=new oo;r=Yt(r,1,bt(this.j),"0"),e=n.call(e,r,this.g),t=ee(t,1,po,e),this.h.send(t)}}}).start(),this.g=null,this.j=0,r&&Mo(this,r)}disconnect(){this.h.shutdown(),this.B.shutdown()}notify(t,e,n){var r=n?function({activityTitle:t}){return Jt(new co,4,At(t))}(n):void 0,o=(n=this.config).X,i=new lo;r=te(i=Yt(i,1,bt(this.j),"0"),4,r),t=o.call(n,r,t),t=this.config.V(t,e),n=(e=this.h).send,t=ee(o=new ho,2,po,t),n.call(e,t)}}var Oo=class{constructor(t){this.g=t}broadcastStateUpdate(t){Bo(this.g,()=>({state:t,context:{}}))}disconnect(){this.g.disconnect()}};function Lo(t,e){return null!=t&&null!=e&&t.bytes.length===e.bytes.length&&t.bytes.every((t,n)=>t===e.bytes[n])}var Do=class{constructor(t){this.g=t}notifySwitchedToMedia(t,e,n){Bo(this.g,()=>({state:{mediaId:e,mediaPlayoutRate:1,mediaPlayoutPosition:n,playbackState:"PLAY"},fa:{activityTitle:t},context:{u:1}}))}notifyPauseState(t,e){Bo(this.g,n=>{if(null==n)throw Error("Invalid before coWatchingState");return{state:{...n,playbackState:t?"PAUSE":"PLAY",mediaPlayoutPosition:e},context:{u:3}}})}notifySeekToTimestamp(t){Bo(this.g,e=>{if(null==e)throw Error("Invalid before coWatchingState");return{state:{...e,mediaPlayoutPosition:t},context:{u:2}}})}notifyPlayoutRate(t){Bo(this.g,e=>{if(null==e)throw Error("Invalid before coWatchingState");return{state:{...e,mediaPlayoutRate:t},context:{u:4}}})}notifyBuffering(t){Bo(this.g,e=>{if(null==e)throw Error("Invalid before coWatchingState");return{state:{...e,mediaPlayoutPosition:t,playbackState:"BUFFERING"},context:{u:3}}})}notifyReady(t){Bo(this.g,e=>{if(null==e)throw Error("Invalid before coWatchingState");return{state:{...e,mediaPlayoutPosition:t},context:{u:3}}})}disconnect(){this.g.disconnect()}};function Ro(t,e){if(null==t||null==e)return!1;const n="PLAY"===t.playbackState?3*Math.max(t.mediaPlayoutRate,1):0,r=Math.abs(t.mediaPlayoutPosition-e.mediaPlayoutPosition);return t.mediaId===e.mediaId&&t.mediaPlayoutRate===e.mediaPlayoutRate&&r<=n&&t.playbackState===e.playbackState}var Fo=class{constructor(t,e){this.channel=t,this.signal=e,this.o=[]}send(t){this.channel.send(ue(t))}async C(t,e){return e((t=await this.channel.C(ue(t))).data)}shutdown(){this.o.forEach(t=>{this.signal.detach(t)})}};async function zo(t){const e=new jr,n=e.signal();!function(t,e,n,r=t=>t){_r(n,n=>{Nr(t,e,r(n))},t)}(e,n,(t=await t).signal,t=>t.content);const{ia:r,ga:o}=function(t,e){var n=$o;const r=t.signal(),o=t.signal();return _r(e,e=>{const i=n(e)?r:o;Nr(t,i,e)},t),{ia:r,ga:o}}(e,n);return{Z:new Fo(t.channel,r),aa:new Fo(t.channel,o)}}function $o(t){if(1!==qt(t,Yr))throw Error("CA Message arrived with no known content message set");return(t=le(t,Jr,1,Yr)).g()}var Go=class extends Pn{async notifySidePanel(t){await to(this.context.g,1,t)}async unloadSidePanel(){await async function(t){var e=Zr,n=new zn,r=new Fn;n=ee(n,5,$n,r),await e(t,Dr(n))}(this.context.g)}async loadSidePanel(){await async function(t){var e=Zr,n=new zn,r=new Cn;n=ee(n,6,$n,r),await e(t,Dr(n))}(this.context.g)}},Jo=class extends Pn{async setAddonStartingState(t){if(null===t)throw new Ae(Le("addonStartingState"));if("object"!=typeof t)throw new Ae(De("addonStartingState",typeof t,"object | undefined"));if(void 0!==t.sidePanelUrl&&"string"!=typeof t.sidePanelUrl)throw new Ae(De("sidePanelUrl",typeof t.sidePanelUrl,"string | undefined"));if(void 0!==t.additionalData&&"string"!=typeof t.additionalData)throw new Ae(De("additionalData",typeof t.additionalData,"string | undefined"));if(Object.keys(t).length!==+!!t.sidePanelUrl+ +!!t.additionalData)throw new Ae(Oe);if(0===Object.keys(t).length)throw new Ae(Ce);var e=[];e.push(nn(en(tn(1),t.sidePanelUrl),t.additionalData)),t=this.context.g;var n=new Rn,r=n.setAddonStartingState;e=ne(new Dn,e),await async function(t,e){var n=Zr;e=ee(new zn,16,$n,e),await n(t,Dr(e))}(t,r.call(n,e))}},Wo=class extends Pn{async notifyMainStage(t){await to(this.context.g,2,t)}},Ho=class{constructor(t){t=t.cloudProjectNumber;const e=jn();if(e.cloudProjectNumber!==t)throw new Ae(ke);const n=e.S,r=e.ba;let o;no=null!=(o=no)?o:function(t,e,n){const r=new jr,o=r.signal();return t=(({destination:t,origin:e,ra:n,Y:r="ZNWN1d",onMessage:o})=>{if("*"===e)throw Error("Sending to wildcard origin not allowed.");const i=Yn(o);return t.postMessage(n?{n:r,t:n}:r,e,[i.port2]),qn(i.port1,o)})({destination:window.parent,origin:e,Y:t,onMessage:t=>{const e=Jn(t.data.content);2===qt(e,Wn)&&Nr(r,o,{content:le(e,mn,2,Wn),ka:t,messagePort:t.data.messagePort})}}),new eo(o,t,n)}(r,n,t),this.g=new ro(e)}async createMainStageClient(){var t=this.g;if(2!==t.h.frameType)throw new Ae(Te);return await Promise.resolve(new Go(t))}async createSidePanelClient(){var t=this.g;if(1!==t.h.frameType)throw new Ae(Pe);return await Promise.resolve(new Wo(t))}async createCoWatchingClient(t){return await async function(t,e){if(({aa:t}=await zo(Qr(t.g))),e=await async function(t,e){if(e)return t=await Uo({activityTitle:e.activityTitle,K:"co-watching",ja:()=>e.onCoWatchingStateQuery(),O:t=>{e.onCoWatchingStateChanged(t)}},t,{X:Eo,W:Io,V:jo,N:Ao,M:Ro}),new Do(t)}(t,e),!e)throw Error("Failed to create co-watching session");return e}(this.g,t)}async createCoDoingClient(t){return await async function(t,e){if(({Z:t}=await zo(Qr(t.g))),e=await async function(t,e){if(e)return t=await Uo({activityTitle:e.activityTitle,K:"co-doing",O:t=>{e.onCoDoingStateChanged(t)}},t,{X:bo,W:So,V:ko,N:vo,M:Lo}),new Oo(t)}(t,e),!e)throw Error("Failed to create co-doing session");return e}(this.g,t)}async createRoomsStandaloneClient(){var t=this.g;if(2!==t.h.frameType)throw new Ae(Te);return await Promise.resolve(new Jo(t))}};let Ko=null;var Yo,qo={addon:{getFrameType:function(){t:{var t=jn().frameType;switch(t){case 2:t="MAIN_STAGE";break t;case 1:t="SIDE_PANEL";break t;default:throw Error(`Unknown frame type: ${t}`)}}return t},createAddonSession:async function(t){if(null===t)throw new Ae(Le("config"));if("object"!=typeof t)throw new Ae(De("config",typeof t,"object"));if("string"!=typeof t.cloudProjectNumber)throw new Ae(De("cloudProjectNumber",typeof t.cloudProjectNumber,"string"));if(Ko&&"integration.test.google.com"!==jn().S)throw new Ae(He);return Ko=new Ho(t)}}},Vo=["meet"],Xo=o;Vo[0]in Xo||void 0===Xo.execScript||Xo.execScript("var "+Vo[0]);for(;Vo.length&&(Yo=Vo.shift());)Vo.length||void 0===qo?Xo=Xo[Yo]&&Xo[Yo]!==Object.prototype[Yo]?Xo[Yo]:Xo[Yo]={}:Xo[Yo]=qo}).apply(n);const r=n.meet,o="RemotePC_Auth_v1",i=36e5;let a=null;function s(t){t?(document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden"):(document.documentElement.style.overflow="",document.body.style.overflow="")}function c(t="silent"){const e=function(){if(a)return a.expiresAt>Date.now()?a:(a=null,localStorage.removeItem(o),null);const t=localStorage.getItem(o);if(!t)return null;try{const e=JSON.parse(t);return e.expiresAt&&e.expiresAt>Date.now()?(a=e,e):(localStorage.removeItem(o),null)}catch(t){return localStorage.removeItem(o),null}}();return e?Promise.resolve(e.username):"prompt"!==t?Promise.reject(new Error("No cached credentials")):new Promise((t,e)=>{const n=function(){let t=document.getElementById("rpc-login-modal");return t||(t=document.createElement("div"),t.id="rpc-login-modal",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.style.position="fixed",t.style.inset="0",t.style.zIndex="99999",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.background="rgba(0,0,0,0.36)",t.style.backdropFilter="blur(2px)",t.style.padding="20px",t.innerHTML='\n   <!DOCTYPE html>\n    <html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>RemotePC Login</title>\n        <style>\n          :root {\n            --rpc-bg: #ffffff;\n            --rpc-muted: #5f6368;\n            --rpc-primary: #1a73e8;\n            --rpc-radius: 12px;\n            --rpc-shadow: 0 12px 40px rgba(13, 37, 63, 0.18);\n            --rpc-gap: 12px;\n            --rpc-input-border: #e6e6e6;\n          }\n\n          body {\n            display: grid;\n            place-items: center;\n            min-height: 100vh;\n            margin: 0;\n            background-color: #f0f2f5;\n          }\n\n          #rpc-login-card, #rpc-login-card * { box-sizing: border-box; }\n\n          #rpc-login-card {\n            width: 460px;\n            max-width: calc(100vw - 32px);\n            border-radius: var(--rpc-radius);\n            background: var(--rpc-bg);\n            box-shadow: var(--rpc-shadow);\n            padding: 24px;\n            font-family: "Google Sans", Roboto, Arial, sans-serif;\n            animation: rpc-zoom-in .18s cubic-bezier(.2,.9,.3,1);\n            transform-origin: center;\n            display: flex;\n            flex-direction: column;\n            gap: 10px;\n          }\n          @keyframes rpc-zoom-in { from { transform: translateY(8px) scale(.98); opacity:0 } to { transform: translateY(0) scale(1); opacity:1 } }\n\n          .rpc-header {\n            display:flex;\n            gap: 12px;\n            align-items:center;\n            margin-bottom: 4px;\n          }\n          .rpc-logo {\n            width:56px;\n            height:56px;\n            border-radius:10px;\n            object-fit:contain;\n            background:#f7f7f7;\n            flex:0 0 56px;\n          }\n          .rpc-title { font-size:18px; color:#202124; font-weight:600; }\n          .rpc-sub { font-size:13px; color:var(--rpc-muted); margin-top:4px; }\n\n          .rpc-form {\n            margin-top: 8px;\n            display:flex;\n            flex-direction:column;\n            gap:12px;\n            max-height: calc(100vh - 180px);\n            overflow:auto;\n            padding-right: 6px;\n          }\n\n          .rpc-field { display:flex; flex-direction:column; gap:6px; }\n          .rpc-label { font-size:13px; color:var(--rpc-muted); margin-left:4px; }\n\n          .rpc-input {\n            width:100%;\n            padding: 12px 44px 12px 12px;\n            font-size:14px;\n            border-radius:8px;\n            border:1px solid #9aa0a6;\n            background:#fff;\n            outline:none;\n            transition: box-shadow .12s ease, border-color .12s ease;\n          }\n          .rpc-input:focus {\n            box-shadow: 0 8px 26px rgba(26,115,232,0.12);\n            border-color: rgba(26,115,232,0.9);\n          }\n\n          /* --- CORRECTION --- */\n          /* This new wrapper div now acts as the positioning container. */\n          .rpc-password-wrapper {\n            position: relative;\n          }\n\n          .rpc-password-toggle {\n            position: absolute;\n            right: 8px;\n            top: 50%;\n            transform: translateY(-50%);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            min-width: 36px;\n            padding: 4px 6px;\n            border-radius: 8px;\n            border: none;\n            background: transparent;\n            cursor: pointer;\n            color: var(--rpc-muted);\n            font-size: 13px;\n          }\n\n          .rpc-password-toggle svg { display:block; width:21px; height:21px; }\n\n          .rpc-aux { display:flex; justify-content:space-between; align-items:center; margin-top:4px; gap:8px; }\n          .rpc-remember { display:flex; align-items:center; gap:8px; color:var(--rpc-muted); font-size:13px; }\n          .rpc-forgot { background:transparent; border:none; color:var(--rpc-primary); font-size:13px; cursor:pointer; padding:6px; }\n\n          .rpc-actions { display:flex; justify-content:flex-end; gap:10px; margin-top:6px; align-items:center; }\n          .rpc-btn { padding:10px 14px; border-radius:10px; border:none; font-size:14px; cursor:pointer; }\n          .rpc-btn-primary { background:var(--rpc-primary); color:#fff; }\n          .rpc-btn-ghost { background:transparent; color:var(--rpc-primary); }\n\n          .rpc-error { color:#b00020; font-size:13px; margin-top:4px; }\n\n          .rpc-loading { display:inline-block; width:16px; height:16px; border-radius:50%; border:3px solid rgba(255,255,255,0.25); border-top-color:rgba(255,255,255,0.95); animation:rpc-spin .9s linear infinite; }\n          @keyframes rpc-spin { to { transform: rotate(360deg) } }\n\n          @media (max-width:480px) {\n            #rpc-login-card { width:100%; padding:16px; }\n            .rpc-logo { width:48px; height:48px; flex:0 0 48px; }\n          }\n        </style>\n    </head>\n    <body>\n\n    <div id="rpc-login-card" role="document" aria-labelledby="rpc-title">\n      <div class="rpc-header">\n        <img src="./logo.png" class="rpc-logo" alt="RemotePC"/>\n        <div>\n          <div id="rpc-title" class="rpc-title">RemotePC</div>\n          <div class="rpc-sub">Sign in to start or join a session</div>\n        </div>\n      </div>\n\n      <form id="rpc-form" class="rpc-form" autocomplete="on" novalidate>\n        <div class="rpc-field">\n          <label class="rpc-label" for="rpc-login-username">Username</label>\n          <input id="rpc-login-username" class="rpc-input" name="username" autocomplete="username" />\n        </div>\n\n        \x3c!-- --- CORRECTION --- --\x3e\n        \x3c!-- The outer div is just for flex layout now. --\x3e\n        <div class="rpc-field">\n          <label class="rpc-label" for="rpc-login-password">Password</label>\n          \x3c!-- This new wrapper contains the input and button. --\x3e\n          <div class="rpc-password-wrapper">\n            <input id="rpc-login-password" class="rpc-input" name="password" type="password" autocomplete="current-password" />\n            <button id="rpc-password-toggle" type="button" class="rpc-password-toggle" aria-pressed="false" title="Show password">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">\n                <path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7z" stroke="#5f6368" stroke-width="1.2" fill="none"></path>\n                <circle cx="12" cy="12" r="3" stroke="#5f6368" stroke-width="1.2" fill="none"></circle>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <div class="rpc-aux">\n          <label class="rpc-remember"><input id="rpc-remember" type="checkbox" /> Remember me</label>\n          <button id="rpc-forgot" type="button" class="rpc-forgot">Forgot?</button>\n        </div>\n\n        <div id="rpc-error" class="rpc-error" role="alert" aria-live="assertive" style="display:none"></div>\n\n        <div class="rpc-actions">\n          <button id="rpc-cancel" type="button" class="rpc-btn">Cancel</button>\n          <button id="rpc-submit" type="submit" class="rpc-btn rpc-btn-primary">Sign in</button>\n        </div>\n      </form>\n    </div>\n\n    </body>\n    </html>\n  ',document.body.appendChild(t),t)}();n.style.display="flex",s(!0);const r=document.getElementById("rpc-form"),c=document.getElementById("rpc-login-username"),l=document.getElementById("rpc-login-password"),u=document.getElementById("rpc-submit"),d=document.getElementById("rpc-cancel"),f=document.getElementById("rpc-error"),g=document.getElementById("rpc-password-toggle"),h=document.getElementById("rpc-remember"),p=document.getElementById("rpc-forgot");f.style.display="none",f.textContent="",c.value="",l.value="",c.focus();let m=!1;const y=function(t){const e='a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])',n=t.querySelector(e),r=Array.from(t.querySelectorAll(e));let o=r[r.length-1],i=function(t){"Tab"===t.key&&(0!==r.length?t.shiftKey?document.activeElement===n&&(t.preventDefault(),o.focus()):document.activeElement===o&&(t.preventDefault(),n.focus()):t.preventDefault())};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)}(n);function w(){m||(m=!0,s(!1),n.style.display="none",r.removeEventListener("submit",E),d.removeEventListener("click",x),g.removeEventListener("click",b),p.removeEventListener("click",S),document.removeEventListener("keydown",A),y())}function v(t){u.disabled=t,d.disabled=t,u.innerHTML=t?'<span class="rpc-loading" aria-hidden="true"></span>':"Sign in"}function b(t){const e="text"===l.type;l.type=e?"password":"text",g.setAttribute("aria-pressed",String(!e)),l.focus()}function S(t){t.preventDefault(),window.open("https://app.remotepc.com/rpcnew/forgotPassword","_blank")}function x(t){t&&t.preventDefault(),w(),e(new Error("User cancelled login"))}function A(t){"Escape"===t.key&&x()}async function E(e){e&&e.preventDefault(),f.style.display="none";const n=c.value.trim(),r=l.value;if(!n||!r)return f.textContent="Please enter username and password",void(f.style.display="block");v(!0);try{await new Promise(t=>setTimeout(t,650));const e=function(){const t=new Uint8Array(16);return crypto.getRandomValues(t),Array.from(t).map(t=>t.toString(16).padStart(2,"0")).join("")}(),r=h.checked?24*i:i;!function({username:t,token:e,expiresAt:n}){const r={username:t,token:e,expiresAt:n};localStorage.setItem(o,JSON.stringify(r)),a=r}({username:n,token:e,expiresAt:Date.now()+r}),w(),t(n)}catch(t){console.error("Login failed",t),f.textContent=t.message||"Sign-in failed",f.style.display="block",v(!1)}}r.addEventListener("submit",E),d.addEventListener("click",x),g.addEventListener("click",b),p.addEventListener("click",S),document.addEventListener("keydown",A)})}async function l(){const t=await r.addon.createAddonSession({cloudProjectNumber:"792791698521"}),e=await t.createSidePanelClient(),n=await e.getActivityStartingState().catch(()=>({})),i=Boolean(n.additionalData),s={signInBtn:document.getElementById("signInBtn"),signOutBtn:document.getElementById("signOutBtn"),startActivityBtn:document.getElementById("startActivityBtn"),createSessionBtn:document.getElementById("createSessionBtn"),hostMsg:document.getElementById("hostMsg"),downloadBtn:document.getElementById("downloadBtn"),participantMsg:document.getElementById("participantMsg"),warnMsg:document.getElementById("warnMsg")};function l(){Object.values(s).forEach(t=>{t&&t.classList.add("hidden")})}s.createSessionBtn&&(s.createSessionBtn.onclick=()=>{window.open("https://login.remotepc.com/rpcnew/home","_blank")});let u=null;try{u=await c("silent")}catch(t){}if(!u)return console.log("Flow: Not signed in"),l(),s.signOutBtn&&s.signOutBtn.classList.add("hidden"),void(s.signInBtn&&(s.signInBtn.classList.remove("hidden"),s.signInBtn.onclick=async()=>{await c("prompt"),window.location.reload()}));l(),s.signOutBtn&&s.signOutBtn.classList.remove("hidden");const d=n.additionalData,f=localStorage.getItem("RemotePC_Initiator"),g=d||f;function h(){s.signOutBtn&&s.signOutBtn.classList.remove("hidden"),s.startActivityBtn&&s.startActivityBtn.classList.remove("hidden"),s.startActivityBtn&&(s.startActivityBtn.onclick=()=>{l(),s.createSessionBtn&&s.createSessionBtn.classList.remove("hidden"),s.hostMsg&&s.hostMsg.classList.remove("hidden"),e.startActivity({sidePanelUrl:"https://meet-addon-hosting-32017.web.app/SidePanel.html",additionalData:u}).catch(t=>{console.error("startActivity failed:",t),t&&t.message&&t.message.includes("Operation cannot be performed while an activity is ongoing")&&(l(),p())}),localStorage.setItem("RemotePC_Initiator",u)})}function p(){s.warnMsg&&s.warnMsg.classList.remove("hidden")}function m(t="Are you sure?"){return new Promise(e=>{const n=document.getElementById("rpcConfirmOverlay"),r=document.getElementById("rpcConfirmMsg"),o=document.getElementById("rpcConfirmYes"),i=document.getElementById("rpcConfirmNo");if(!(n&&o&&i&&r))return e(!1);function a(t){n.classList.add("hidden"),n.setAttribute("aria-hidden","true"),o.removeEventListener("click",s),i.removeEventListener("click",c),e(t)}function s(t){t.preventDefault(),a(!0)}function c(t){t.preventDefault(),a(!1)}r.innerText=t,n.classList.remove("hidden"),n.setAttribute("aria-hidden","false"),o.addEventListener("click",s),i.addEventListener("click",c)})}console.log("sessionInitiator:",d),console.log("storedInitiator:",f),console.log("initiator:",g),console.log("userEmail:",u),console.log("isSessionStarted:",i),console.log("startingState:",n),g?g===u?(console.log("Flow: Host (returning)"),h()):i?(console.log("Flow: Participant"),s.signOutBtn&&s.signOutBtn.classList.remove("hidden"),s.downloadBtn&&s.downloadBtn.classList.remove("hidden"),s.participantMsg&&s.participantMsg.classList.remove("hidden"),s.downloadBtn&&(s.downloadBtn.onclick=()=>{window.open("https://meet-addon-hosting-32017.web.app/DownloadRedirect.html","_blank")})):(console.log("Flow: Premature non-host (warning)"),p()):(console.log("Flow: Host (first opener)"),h()),window.__rpc_signout_currentUser=u,window.__rpc_signout_startingState=n,window.__rpc_signout_delegated_attached||(window.__rpc_signout_delegated_attached=!0,document.addEventListener("click",async function(t){if(!t.target.closest||!t.target.closest("#signOutBtn"))return;t.preventDefault();const e=window.__rpc_signout_currentUser,n=window.__rpc_signout_startingState||{};console.log("SIGNOUT: delegated start  userEmail:",e);try{const r=n&&n.additionalData,i=localStorage.getItem("RemotePC_Initiator");if(i&&i===e||r&&r===e){if(!await m("You are the session initiator. End the session and sign out?"))return void console.log("SIGNOUT: cancelled (initiator)");localStorage.removeItem("RemotePC_Initiator"),console.log("SIGNOUT: removed RemotePC_Initiator")}else if(!await m("Sign out now?"))return void console.log("SIGNOUT: cancelled (participant)");try{await async function(){console.log("AUTH: logout() called");try{localStorage.removeItem(o),a=null,console.log("AUTH: localStorage cleared")}catch(t){console.warn("AUTH: logout() cleanup error",t)}}(),console.log("SIGNOUT: logout() OK")}catch(t){console.warn("SIGNOUT: logout() threw",t)}try{sessionStorage.removeItem("meetAddonEmail")}catch(t){}if(window.google&&google.accounts&&google.accounts.id&&google.accounts.id.disableAutoSelect)try{google.accounts.id.disableAutoSelect(),console.log("SIGNOUT: disabled GSI autoSelect")}catch(t){}}catch(t){console.error("SIGNOUT: unexpected",t)}finally{console.log("SIGNOUT: reloading UI"),window.location.reload()}},{capture:!1}))}const u="792791698521-d99qe7hhcstqa58iefpuqdel87lradsd.apps.googleusercontent.com",d="meetAddonEmail";let f=null,g=!1;async function h(){const t=await r.addon.createAddonSession({cloudProjectNumber:"792791698521"}),e=await t.createMainStageClient(),n=(await e.getActivityStartingState()).additionalData;let o;try{o=await function(t="silent"){if(f)return Promise.resolve(f);const e=sessionStorage.getItem(d);return e?(f=e,Promise.resolve(e)):new Promise((e,n)=>{var r;if(r="silent"===t,g||(google.accounts.id.initialize({client_id:u,auto_select:!!r,cancel_on_tap_outside:!1,callback:t=>{try{const e=JSON.parse(atob(t.credential.split(".")[1]));f=e.email,sessionStorage.setItem(d,f)}catch(t){console.error("Failed to parse GSI credential",t)}}}),g=!0),"silent"===t)return void google.accounts.id.prompt(t=>{f?e(f):n(new Error("Silent sign-in failed"))});let o=!1;google.accounts.id.prompt(t=>{o?f?e(f):n(new Error("Prompt sign-in failed")):(o=!0,f||google.accounts.id.prompt())})})}("silent")}catch{o=null}console.log("initiator from startingState:",n),console.log("myEmail from Identity SDK:",o),document.getElementById("greeting").innerText=n===o?" Hi viewer":" Hi host"}return e})());